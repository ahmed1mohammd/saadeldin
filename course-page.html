<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <!-- Basic Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO Meta -->
  <title>تفاصيل الكورس | سعد الدين لغة عربية</title>
  <meta name="description"
    content="تعرف على تفاصيل الكورس، محتوى الدروس، عدد المحاضرات، والاختبارات المتاحة مع سعد الدين لتأسيس قوي في اللغة العربية." />
  <meta name="keywords"
    content="تفاصيل كورس عربي, شرح نحو, كورس بلاغة, منصة سعد الدين, مدرس لغة عربية, كورسات عربي أونلاين" />
  <meta name="author" content="سعد الدين محمود" />

  <!-- Open Graph (Social Media Preview) -->
  <meta property="og:title" content="Science مع مستر عمر طارق ✨" />
  <meta property="og:description" content="مع بعض الساينس هيبقى ممتع مش صعب ✨  
    افتكر دايمًا إن الساينس فهم مش حفظ." />
  <meta property="og:image" content="/media/img/main-img.webp" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ar_AR" />

  <!-- Structured Data: Website -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "سعد الدين لغة عربية",
      "url": "https://www.saadeldin-arabic.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.saadeldin-arabic.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>

  <!-- Structured Data: Teacher -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "سعد الدين ",
      "jobTitle": "مدرس لغة عربية",
      "description": "مدرس متخصص في تدريس اللغة العربية لجميع المراحل بأسلوب مبسط وممتع، معروف بـ الخال سعد، يلبي بلاغة وأدب وقراءة ونحو",
      "url": "https://www.saadeldin-arabic.com",
      "sameAs": [
        "https://www.facebook.com/share/1GngrW1a9b/",
        "https://www.youtube.com/@saadeldeenmahmoud.arabic",
        "https://www.instagram.com/saad_eldinmahmoud"
      ]
    }
  </script>

  <!-- Fonts -->
  <!-- Custom fonts loaded from global.css -->

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
  <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" />
  <link rel="manifest" href="/favicon/site.webmanifest" />

  <!-- Styles -->
  <link rel="stylesheet" href="css/wow.min.css" />
  <link rel="stylesheet" href="css/all.min.css" />
  <link rel="stylesheet" href="css/animate.min.css" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/global.css?v=1.0.0" />
  <link rel="stylesheet" href="css/style.css?v=1.0.0" />
  <link rel="stylesheet" href="css/course-page.css?v=1.0.0" />
  <link rel="stylesheet" href="css/youtube-player.css" />

  <!-- material icon -->
   <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet"
  />
  <!-- SweetAlert2 -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.10.1/sweetalert2.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.10.1/sweetalert2.all.min.js"></script>
</head>

<body>


  <!-- Start navbar section -->
  <nav class="nav-home position-relative">
    <div class="container">
      <div class="row">
        <div class="col-md-12 nav-content">
          <div class="content">
            <div id="nav-links-container">
              <div class="parent-spinner">
                <div class="spinner">
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
              </div>

              <div id="menu-toggle">
                <i class="fa-solid fa-bars bars"></i>
              </div>

              <!-- روابط التنقل -->
              <ul class="links">
                <li>
                  <a href="create-account.html" class="create-account">
                    <img src="media/img/create-icon.svg" alt="create icon" style="width: 35px; height: 35px" />
                    انشئ حسابك
                  </a>
                </li>
                <li>
                  <a href="login.html" class="login-button">
                    <img src="media/img/login-icon.svg" alt="login icon" style="width: 35px; height: 35px" />
                    سجل دخولك
                  </a>
                </li>
              </ul>
            </div>

            <div class="content-2">
              <!-- زر الوضع الليلي -->

              <div dir="ltr" class="dark-mode">
                <div id="shape" class="changer"></div>
                <div id="toggle" class="changer">
                  <span class="changer">
                    <i class="moon changer d-flex justify-content-center align-items-center">
                      <ion-icon name="cloudy-night-outline"></ion-icon>
                    </i>
                    <i class="sun changer d-flex justify-content-center align-items-center">
                      <ion-icon name="partly-sunny-outline"></ion-icon>
                    </i>
                  </span>
                </div>
              </div>

              <!-- لوجو -->
              <a href="index.html" class="logo">
                <img src="media/img/logo.webp" alt="logo" />
              </a>
            </div>
          </div>
          <div class="scroll-line"></div>
        </div>
      </div>
    </div>
  </nav>
  <!-- End navbar section -->

  <!-- Start info course section -->

  <section class="info-course">
    <div class="container">
      <!-- <div class="row"> -->
        <div class="row course-page">

        </div>
      <!-- </div> -->
      <div class="">
        <!-- سيتم تحميل بيانات الكورس هنا بنفس التنسيق القديم -->
      </div>
      <div class="m-5 text-center" id="subscriptionContainer">
        <!-- <a href="#" class="subscription">اشترك دلوقتي</a> -->
      </div>
    </div>
  </section>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const studentData = JSON.parse(localStorage.getItem("studentData"));
      const apiToken = localStorage.getItem("apiToken");

      const urlParams = new URLSearchParams(window.location.search);
      const courseId = parseInt(urlParams.get("id"));

      if (!apiToken || !courseId) {
        return;
      }

      // تأكد من تحميل tenantFetch
      function fetchCourseSubscriptionWithTenant() {
        if (typeof tenantFetch !== 'function') {
          setTimeout(fetchCourseSubscriptionWithTenant, 50);
          return;
        }
        tenantFetch("https://api-platfrom.ro-s.net/api/get-courses", {
          method: "GET",
          headers: {
            Authorization: "Bearer " + apiToken,
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            const container = document.getElementById("subscriptionContainer");
            if (data && Array.isArray(data.courses)) {
              const isSubscribed =
                data.courses &&
                data.courses.some((course) => course.id === courseId);
              if (isSubscribed) {
                container.innerHTML = `
              <a class="subscription-now disabled"> أنت مشترك بالفعل</a>
            `;
              } else {
                container.innerHTML = `
              <a href="#" class="subscription">اشترك دلوقتي</a>
            `;
              }
            }
          })
          .catch((error) => { });
      }
      fetchCourseSubscriptionWithTenant();
    });
  </script>

  <!-- End info course section -->

  <!-- Start all content course section -->

  <section class="all-content-course" id="coursesContainer">
    <div class="container">
      <!-- Video Player -->
      <div id="videoPreview-0" class="video-preview" style="display: none">
        <div id="darseli-player-container" dir="ltr">
          <div id="darseli-player-topOverlay">
            <div class="content-topOverlay">
              <div class="left-side flex items-center gap-3">
                <img src="media/img/logo.webp" alt="قناة يوتيوب" class="logo-video" />
              </div>

              <!-- <div class="right-side flex items-center gap-3" dir="rtl">
                  <img
                    src="media/img/teacher-1.jpg"
                    alt="قناة يوتيوب"
                    class="rounded-full" style="width: 40px; height: 40px"
                  />
                  <p class="text-white font-semibold">PHISCIS LESSON ONE</p>
                </div> -->
            </div>
          </div>

          <div id="darseli-player-player"></div>
          <div id="darseli-player-watermark"></div>
          <div class="darseli-player-overlay" id="darseli-player-overlay"></div>
          <div id="darseli-player-middleBtn" class="material-icons">
            play_arrow
          </div>

          <div class="darseli-player-controls" id="darseli-player-controls">
            <div class="darseli-player-progress-bar" id="darseli-player-progressBar">
              <div class="darseli-player-progress" id="darseli-player-progress"></div>
              <div class="darseli-player-tooltip-time" id="darseli-player-tooltipTime"></div>
            </div>

            <div class="darseli-player-bottom-controls">
              <div class="darseli-player-left-controls">
                <button id="darseli-player-rewind" class="darseli-player-control-btn material-icons">
                  replay_10
                </button>
                <button id="darseli-player-playPause" class="darseli-player-control-btn material-icons">
                  play_arrow
                </button>
                <button id="darseli-player-forward" class="darseli-player-control-btn material-icons">
                  forward_10
                </button>
                <input id="darseli-player-volume" class="darseli-player-volume-slider" type="range" min="0" max="100"
                  value="100" />
                <div class="darseli-player-time">
                  <span id="darseli-player-currentTime">0:00</span> /
                  <span id="darseli-player-duration">0:00</span>
                </div>
              </div>

              <div class="darseli-player-right-controls">
                <button id="darseli-player-settingsBtn" class="darseli-player-control-btn material-icons">
                  settings
                </button>
                <button id="darseli-player-fullscreen" class="darseli-player-control-btn material-icons">
                  fullscreen
                </button>
              </div>
            </div>

            <div class="darseli-player-settings-menu" id="darseli-player-settingsMenu">
              <label>السرعة:</label>
              <select id="darseli-player-speed">
                <option value="0.5">0.5x</option>
                <option value="1" selected>1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
              </select>

              <label>الجودة:</label>
              <select id="darseli-player-quality">
                <option value="auto" selected>تلقائي</option>
                <option value="small">144p</option>
                <option value="medium">240p</option>
                <option value="large">360p</option>
                <option value="hd480">480p</option>
                <option value="hd720">720p</option>
                <option value="hd1080">1080p</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- File Viewer -->
      <div id="filePreview-0" class="file-preview" style="display: none">
        <span id="fileName-0"></span>
        <br />
        <a id="downloadLink-0" href="#" class="download-file" target="_blank">تحميل الملف</a>
        <br />
        <button class="close-file-btn" data-course="0">إغلاق الملف</button>
      </div>

      <!-- Exam Placeholder -->
      <div id="examPreview-0" class="exam-preview" style="display: none">
        <p>الامتحان</p>
        <button class="close-exam-btn" data-course="0">إغلاق</button>
      </div>

      <div class="row">
        <div class="col-md-12">
          <!-- Loading indicator -->
          <div id="loadingIndicator" style="text-align: center; padding: 20px">
            <i class="fas fa-spinner fa-spin"></i> جاري تحميل الكورسات...
          </div>

          <!-- Courses will be dynamically inserted here -->
        </div>
      </div>
    </div>
  </section>

  <!-- Start all content course section -->

  <!-- Start footer section home -->

  <div id="footer"></div>
  <script src="js/footer.js"></script>

  <!-- End footer section home -->
  <script>
    document.addEventListener("DOMContentLoaded", async function () {
      const apiBaseUrl = "https://api-platfrom.ro-s.net/api/";
      const storageBaseUrl = "http://127.0.0.1:8000/storage/";

      const courseSection = document.querySelector(
        ".info-course .course-page"
      );
      const urlParams = new URLSearchParams(window.location.search);
      const courseId = parseInt(urlParams.get("id"));

      if (!courseId) {
        courseSection.innerHTML = `<p class="text-center text-danger">لم يتم العثور على الكورس.</p>`;
        return;
      }

      try {
        // تأكد من تحميل tenantFetch
        async function fetchCourseDataWithTenant() {
          if (typeof tenantFetch !== 'function') {
            setTimeout(fetchCourseDataWithTenant, 50);
            return;
          }
          const response = await tenantFetch(`${apiBaseUrl}courses`);
          if (!response.ok) throw new Error("API Error");
          const jsonResponse = await response.json();
          // Handle wrapped or unwrapped response
          const courses = jsonResponse.data || jsonResponse;
          // Debug logs
          console.log("Fetched courses:", courses);
          console.log("Looking for courseId:", courseId);
          const course = courses.find((c) => c.id === courseId);
          if (!course) {
            console.error("Course not found in list");
            courseSection.innerHTML = `<p class="text-center text-danger">الكورس غير موجود.</p>`;
            return;
          }
          const courseName = `${course.title} - ${course.grade ? course.grade.name : ''}`;
          let imageUrl = "media/img/default-course.jpg";
          if (course.image) {
            if (course.image.startsWith("http")) {
              imageUrl = course.image;
            } else {
              imageUrl = `${storageBaseUrl}${course.image}`;
            }
          }
          const startDateVal = course.start_date || course.created_at;
          const endDateVal = course.end_date || course.updated_at;
          const startDate = startDateVal ? new Date(startDateVal).toLocaleDateString(
            "ar-EG-u-nu-arab",
            {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric",
            }
          ) : 'غير محدد';
          const endDate = endDateVal ? new Date(endDateVal).toLocaleDateString(
            "ar-EG-u-nu-arab",
            {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric",
            }
          ) : 'غير محدد';
          courseSection.innerHTML = `
            

              <div class="col-md-7 content-course-teacher">
                <div>
                  <h4>${courseName}</h4>
                  <hr />
                  <p class="number-lect">${course.description || "لا يوجد وصف متاح"}</p>
                  <hr />
                </div>
                <div class="info-course-teacher">
                  <p class="date-course">
                    ${startDate} <i class="fa-solid fa-folder-plus"></i>
                  </p>
                  <p class="update-course">
                    ${endDate} <i class="fa-solid fa-file-circle-plus fa-fade"></i>
                  </p>
                </div>
              </div>

              <div class="col-md-5 d-flex justify-content-center justify-content-md-end align-items-center">
                <div class="course-img py-3 d-flex justify-content-end align-items-center">
                  <img src="${imageUrl}" alt="course-img" dir="ltr" />
                </div>
              </div>

            
          `;
        }
        fetchCourseDataWithTenant();
        if (!response.ok) throw new Error("API Error");

        const jsonResponse = await response.json();
        // Handle wrapped or unwrapped response
        const courses = jsonResponse.data || jsonResponse;

        // Debug logs
        console.log("Fetched courses:", courses);
        console.log("Looking for courseId:", courseId);

        const course = courses.find((c) => c.id === courseId);

        if (!course) {
          console.error("Course not found in list");
          courseSection.innerHTML = `<p class="text-center text-danger">الكورس غير موجود.</p>`;
          return;
        }

        const courseName = `${course.title} - ${course.grade ? course.grade.name : ''}`;
        let imageUrl = "media/img/default-course.jpg";
        if (course.image) {
          if (course.image.startsWith("http")) {
            imageUrl = course.image;
          } else {
            imageUrl = `${storageBaseUrl}${course.image}`;
          }
        }
        const startDateVal = course.start_date || course.created_at;
        const endDateVal = course.end_date || course.updated_at;

        const startDate = startDateVal ? new Date(startDateVal).toLocaleDateString(
          "ar-EG-u-nu-arab",
          {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          }
        ) : 'غير محدد';

        const endDate = endDateVal ? new Date(endDateVal).toLocaleDateString(
          "ar-EG-u-nu-arab",
          {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          }
        ) : 'غير محدد';

        courseSection.innerHTML = `
          <div class="row">
            <div class="col-md-7 content-course-teacher">
              <div>
                <h4>${courseName}</h4>
                <hr />
                <p class="number-lect">${course.description || "لا يوجد وصف متاح"}</p>
                <hr />
              </div>
              <div class="info-course-teacher">
                <p class="date-course">
                  ${startDate} <i class="fa-solid fa-folder-plus"></i>
                </p>
                <p class="update-course">
                  ${endDate} <i class="fa-solid fa-file-circle-plus fa-fade"></i>
                </p>
              </div>
            </div>
            <div class="col-md-5 d-flex justify-content-center align-content-center">
              <div class="course-img p-3 d-flex justify-content-end align-content-center">
                <img src="${imageUrl}" alt="course-img" dir="ltr" />
              </div>
            </div>
          </div>
        `;
      } catch (error) {
        courseSection.innerHTML = `<p class="text-center text-danger">حدث خطأ أثناء تحميل بيانات الكورس.</p>`;
      }
    });
  </script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <!-- file main js -->
  <script src="js/main.js?v=<?= time() ?>"></script>

  <!-- file course page js -->
  <script src="js/course-page.js?v=<?= time() ?>"></script>
  <!-- QR Code Generator Library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="js/youtube-player.js?v=<?= time() ?>"></script>
  <!-- file js fonts -->
  <script src="js/all.min.js"></script>
  <!-- jquery -->
  <script src="js/jquery.slim.min.js"></script>
  <!-- file js bootstrap -->
  <script src="js/bootstrap.min.js"></script>
  <!-- popper -->
  <script src="js/popper.min.js"></script>
  <!-- lord icon -->
  <script src="https://cdn.lordicon.com/lordicon.js" defer></script>
  <!-- file wow -->
  <!-- <script src="js/wow.min.js"></script> -->
  <!-- script to start wow -->
  <!-- <script>
      new WOW().init();
    </script> -->
  <!-- file mdb -->
  <!-- <script src="js/mdb.min.js"></script> -->
  <script>
    // Disable right-click
    document.addEventListener("contextmenu", (event) =>
      event.preventDefault()
    );

    // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
    document.addEventListener("keydown", function (e) {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
        (e.ctrlKey && e.key === "U")
      ) {
        e.preventDefault();
      }
    });
  </script>
</body>

</html>